#  Docker Installation of MS SQL Server     
## Find an image
  Docker Hub Microsoft Repository  [https://hub.docker.com/_/microsoft-mssql-server]  
    [https://learn.microsoft.com/en-us/sql/linux/tutorial-restore-backup-in-sql-server-container?view=sql-server-ver17&tabs=cli]

## Pull the image
    docker pull edgardochin/ms_sqlserver:2017-latest   
.

    docker pull mcr.microsoft.com/mssql/server:2019-latest   

## Create a Docker Volume for SQL Server Data
Before creating a container for SQL Server, we need to create a Docker volume to store the data generated by the database. This volume will ensure that the data persists even if the container is stopped or removed.  

    docker volume create sql_server_data  

SQL Server Docker volumes [https://umatechnology.org/how-to-set-up-a-microsoft-sql-server-database-in-docker-on-linux/#google_vignette]  
### Default location of SQL Server database files  
    /var/opt/mssql 
## Initial creation of docker container from the docker hub image
    docker run 
        -d
        -e "ACCEPT_EULA=Y" 
        -e "SA_PASSWORD=Ec621006" 
        -e "MSSQL_PID=Developer" 
        -e "Tag_Version=sqlserver-2017" 
        -p 1433:1433 
        -v sqlserver_data:/var/opt/mssql
        --name "ssrv2017" 
        edgardochin/ms_sqlserver:sqlserver-2017

Starting with Sql Server 2022 the environment variable for SA_PASSWORD is changed to MSSQL_SA_PASSWORD.   

    docker run -d -e "ACCEPT_EULA=Y" -e "MSSQL_SA_PASSWORD=@Ec621006" -e "MSSQL_PID=Developer" -p 1433:1433 -v ssrvdata-2025:/var/opt/mssql --name "ssrv2025" mcr.microsoft.com/mssql/server:2025-latest 
-e: set environment variables  
-p: set port  map port from host to container  
-d: run in detached mode  
--name:  container name  
-v: mount volume  [volumnName or HostLocation]:[container directory] i.e. sqlerver_data:/var/opt/mssql

## Start an existing docker container
    - docker run ssrv2019
## retag existing local image
    docker tag mcr.microsoft.com/mssql/server:2019-latest edgardochin/ms_sqlserver:sqlserver-2019
                       local-image:tag                            dockerHub-repo:tag    
## Push image to DockerHub
    docker push edgardochin/ms_sqlserver:sqlserver-2019

## MS-SQLserver data files by default, are in this container location :
    /var/opt/mssql/data  
This can be mapped to a docker volume during "docker run' with -v flag
## Run CLI/bash in a running container 
    docker exec -it ssrv2019 bash  
## Copying files from host to Docker container  
https://www.youtube.com/watch?v=ht4gqt4zSyw

http://stackoverflow.com/questions/22907231/ddg#31971697

The cp command can be used to copy files.  
  
One specific file can be copied TO the container like:  
  
    docker cp database1.bak mycontainer:/var/opt/mssql/data/database.bak
  
One specific file can be copied FROM the container like:  
  
    docker cp mycontainer:/foo.txt foo.txt  

For emphasis, mycontainer is a container ID, not an image ID.

Multiple files contained by the folder src can be copied into the target folder using:

    docker cp src/. mycontainer:/target
    docker cp mycontainer:/src/. target    

## Test Connection in MS-SQL Server Managment Service
    localhost
    sa
    @Ec621006



    docker run -e "ACCEPT_EULA=Y" -e "SA_PASSWORD=Ec621006" -e "MSSQL_PID=Developer" -e "Tag_Version=sqlserver-2017" -p 1433:1433 -v sqlserver_data:/var/opt/mssql --name "ssrv2017" edgardochin/ms_sqlserver:sqlserver-2017